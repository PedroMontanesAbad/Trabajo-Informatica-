#include <stdio.h>
#include <ctype.h>
#include <string.h>

int pregunta_inicial(){
    int valor;
    printf("\n \n¿Iniciar cuestionario?\n");
    
    printf("\t1-SI\n\t2-NO\n");
    
    do{
        
        scanf("%d", &valor);
        
    }while(valor != 1 && valor != 2);
        
    return valor;
}

int preguntas_cuestionario(int i){
    
    char letra; 
    
    int valor;
    
    switch(i){
    
      case 0:
            printf("PREGUNTA Nª1: \n");
      
            printf("¿En que continente está el embalse más grande del mundo?");
      
            printf("\n \tA)América \n \tB)Europa \n \tC)África \n \tD)Asia\n");
            
            valor = valor_letra_introducida();
            
            return valor - 'A' + 1; /*Se resta al valor de la letra el valor de A para que sea un número entre el 0 y el 3 y se le suma 1 para que esté en 1-4*/;
            
      case  1:  
      
            printf("\nPREGUNTA Nª2: \n");
      
            printf("¿Que país de Europa tiene el mayor número de embalses?");
      
            printf("\n \tA)Albania \n \tB)Rumanía \n \tC)Noruega \n \tD)España\n");
            
            valor = valor_letra_introducida();
            
            return valor - 'A' + 1;
            
      case  2:  
      
            printf("\nPREGUNTA Nª3: \n");
      
            printf("¿Paísen el que se encuentra el embalse más grande de Europa?");
      
            printf("\n \tA)Francia \n \tB)España \n \tC)Italia \n \tD)Suecia\n");
            
            valor = valor_letra_introducida();
            
            return valor - 'A' + 1;    
            
      case  3:  
      
            printf("\nPREGUNTA Nª4: \n");
      
            printf("¿Qué factor influye en mayor medida a el nivel de agua en los embalses de España?");
      
            printf("\n \tA)Altitud de las montañas \n \tB)Población de la zona \n \tC)Temperatura media del mar \n \tD)Precipitaciones y sequías\n");
            
            valor = valor_letra_introducida();
            
            return valor - 'A' + 1;
      case  4:  
      
            printf("\nPREGUNTA Nª5: \n");
      
            printf("¿Dónde se encuentra el embalse más antiguo de España?");
      
            printf("\n \tA)Alicante \n \tB)Asturias \n \tC)Castilla y León \n \tD)País Vasco\n");
            
            valor = valor_letra_introducida();
            
            return valor - 'A' + 1;
      case  5:  
      
            printf("\nPREGUNTA Nª6: \n");
      
            printf("¿Cual fue el año desde el 2004 en el que hubo más agua embalsada en todo el país?");
      
            printf("\n \tA)2008 \n \tB)2021 \n \tC)2013 \n \tD)2017\n");
            
            valor = valor_letra_introducida();
            
            return valor - 'A' + 1;
    }
}

int valor_letra_introducida(){
    
    int i=0;
    char letra;
    char cadena[10];
    
    printf("Introduzca la respuesta: ");
    
    do{
        
        fgets(cadena, sizeof(cadena), stdin);
        
        letra = toupper(cadena[0]);
        
        if(letra!='A' && letra!='B' && letra!='C' && letra!='D' && i>0){
            
            printf("\nCarácter incorrecto. Introduzca la respuesta de nuevo:");
        }
        
        i++;/*Ponemos un i de manera que el texto de carácter incorrecto solo salta a la segunda*/
        
    }while(letra!='A' && letra!='B' && letra!='C' && letra!='D' );
    
    return letra;
}

void mostrar_resultado(int correcta){
    
    if( correcta ){
        
            printf("\n\t \t \t        X\n");
            
            printf("\t \t \t       X\n");
            
            printf("\t \t \t      X \n");
            
            printf("\t \t \tX   X\n");
            
            printf("\t \t \t X X\n");
            
            printf("\t \t \t  X \n");
            
       }
        else{
            
            printf("\n\t \t \tX   X\n");
            
            printf("\t \t \t X X\n");
            
            printf("\t \t \t  X\n");
            
            printf("\t \t \t X X\n");
            
            printf("\t \t \tX   X\n");
        }
}

tabla_errores(correcta,i){
    printf("\n \t \t ***************");
    
    if(correcta){
        
    printf("\n \t \t *PREGUNTA %d*SI*", i);
    
    }
    else{
        
    printf("\n \t \t *PREGUNTA %d*NO*", i);
    
    }
}
int main(){
    
    printf("\nOímos, vemos y hablamos sobre los embalses cotidianamente, nos abastecen de agua para el consumo y la agricultura y tienen un impacto en el día a día del que el ciudadano promedio no es consciente. Dicho esto, ¿sabrás lo suficiente cómo para llevarte el premio al que más sabe de embalses?");
    
    int valor_pregunta = pregunta_inicial(), respuestas[6], respuestas_correctas[6]={3,4,2,4,1,3};
    
    if(valor_pregunta == 1){
        
      printf("\t \t \t*********************************\n");
    
      printf("\t \t \t*    CUESTIONARIO DE EMBALSES   *\n");
    
      printf("\t \t \t*********************************\n");
    
    for(int i=0;i<6;i++){
        
        respuestas[i] = preguntas_cuestionario( i );
       
        mostrar_resultado(respuestas[i]==respuestas_correctas[i]);
      
      
    }
    
    }
    
    else if(valor_pregunta == 2){
    
    printf("\n joe :(");
    
    return 0;
    
    }
    
    else{
        
        return 0;
        
    }
    
    for(int i=0;i<6;i++){
        
    tabla_errores(respuestas[i]==respuestas_correctas[i], i);
        
    }
    
    printf("\n \t \t ***************");/*se acaba la tabla por abajo*/
    
    return 0;
}
