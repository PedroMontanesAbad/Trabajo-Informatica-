#include <stdio.h>
#include <stdlib.h>
#include <string.h>

//contar embalses, sabemos que cada embalse se repite 12 veces, la cosa, me falta separar las cuencas
//introducimos función que cuenta los embalses
int  contarembalses(char *dataset){
	FILE *ftabla = fopen(dataset, "r");
//vemos que se abrió bien el fichero
	if (ftabla == NULL){
		printf("Problema al leer el archivo %s. Termina el programa.\n", dataset);
		return -1;
	}
	int n = 0; //cantidad de embalses (número de líneas que dividiremos entre 12)

	char c = fgetc(ftabla);
	
	while (!feof(ftabla)){
		
		if (c == '\n'){
			n++;
		}
			c = fgetc(ftabla);		
	}
	fclose(ftabla);
	return n-1; //en la primera línea están los datos iniciales.
}
int main (){
	char tabla[] = "dataset.csv";
	int n = contarembalses(tabla)/12; //cantidad de embalses que hay
	printf ("la cantidad de embalses es de: %d\n",n);
	
/*
//Leer fichero entero línea a línea, te lo imprime tal cual
FILE * ftabla = fopen(tabla, "r");
	if (ftabla == NULL){
		printf("Problema al leer el archivo %s. Termina el programa.\n", tabla);
		return -1;
	}
char buffer [4];
printf("Contenido del archivo es:\n");
while(fgets(buffer,4,ftabla) != NULL) {
   printf("%s", buffer); //imprime cada línea leída
}
fclose(ftabla);

*/
return 0;	
}
